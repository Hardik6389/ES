// Extended Question Banks with 25+ questions each
const firstYearQuestions = [
    // Module: Introduction to Employability Skills
    {
        question: "Which of the following options is an Employability Skill?",
        options: ["Good interview Skills", "Good Communication Skills", "Digital Skills", "All of these"],
        correctAnswer: "D",
        module: "Introduction to Employability Skills"
    },
    {
        question: "An employee is someone who ______",
        options: ["Goes to school to study", "Does not work", "Works for a salary", "Goes to play"],
        correctAnswer: "C",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Which are the two skills needed for good career growth?",
        options: ["Watching TV & Making friends", "Traveling & Shopping", "Playing video games & cooking skills", "Technical Skills & Employability Skills"],
        correctAnswer: "D",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Gopi is always willing to learn and improve in his work. He has a ______.",
        options: ["Fixed mindset", "Certificate", "Growth mindset", "Marksheet"],
        correctAnswer: "C",
        module: "Introduction to Employability Skills"
    },
    {
        question: "What are Employability Skills?",
        options: ["Skills used only in sports", "Skills needed to be successfully employed", "Skills for good communication", "Skills for playing video games"],
        correctAnswer: "B",
        module: "Introduction to Employability Skills"
    },
    {
        question: "When we learn something online, it is called",
        options: ["Classroom learning", "Teaching", "E-learning", "Digital marketing"],
        correctAnswer: "C",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Which of these is an advantage of learning online?",
        options: ["Learn anytime & anywhere", "Make friends with classmates", "No need to study", "Have shorter classes"],
        correctAnswer: "A",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Which of these is an e-learning portal?",
        options: ["ASCEM", "Bharat Skills Portal", "NAPS portal", "Netflix"],
        correctAnswer: "B",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Ram works as a fitter in a company. He wants to upgrade his trade skills and employability skills in his free time. What should he do?",
        options: ["Play sports", "Watch news", "Find courses: online or offline", "Quit job"],
        correctAnswer: "C",
        module: "Introduction to Employability Skills"
    },
    {
        question: "Zeena wants to enroll for an e-learning course. The most important thing she needs is a______.",
        options: ["Book", "Pen", "Mobile phone or Computer", "Library card"],
        correctAnswer: "C",
        module: "Introduction to Employability Skills"
    },
    // Module: Constitutional Values - Citizenship
    {
        question: "Values and ethics help us build good ______.",
        options: ["games", "behavior", "studies", "rent"],
        correctAnswer: "B",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Values decide the ______ of a person.",
        options: ["character", "laptop", "home", "system"],
        correctAnswer: "A",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "It is not good to forward ______ on social media.",
        options: ["fake news", "messages", "greetings", "songs"],
        correctAnswer: "A",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "A person who respects and follows the law of a country is a ______.",
        options: ["Businessman", "Bad Employee", "Responsible Citizen", "Small Kid"],
        correctAnswer: "C",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Rita found someone's wallet in the office. She gives it to the office manager. This shows that she is ______.",
        options: ["open-minded", "honest & responsible", "kind", "non - Judgemental"],
        correctAnswer: "B",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "The Constitution Of India is also called as ______.",
        options: ["Bharatiya Academy", "Bhartiya Samvidhan", "Novel", "Newspaper"],
        correctAnswer: "B",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "India is a Sovereign country. That means it can make its own______.",
        options: ["Money", "State", "Election", "Rules and Decisions"],
        correctAnswer: "D",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Indian constitution is a set of ______ of our country.",
        options: ["Laws and rules", "Keys", "Tools", "Languages"],
        correctAnswer: "A",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Mr. Johnson wants to employ an 8 year old girl for household work. In India, which fundamental right would not allow it?",
        options: ["Right to equality", "Right to freedom of religion", "Right against exploitation", "Right to information"],
        correctAnswer: "C",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Which fundamental right allows us to freely visit a temple, church, or mosque for prayer?",
        options: ["Right to equality", "Right to education", "Right against exploitation", "Right to freedom of religion"],
        correctAnswer: "D",
        module: "Constitutional Values - Citizenship"
    },
    // Add more questions to reach at least 25 for first year
    {
        question: "Addition of harmful smoke, gases and chemicals to the environment in large quantities is called ______.",
        options: ["Air", "Pollution", "Wind", "Storm"],
        correctAnswer: "B",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Cutting down of trees for farming and housing purposes is called ______.",
        options: ["Reforestation", "Deforestation", "Afforestation", "Forestation"],
        correctAnswer: "B",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Releasing chemicals, waste, plastics into the water is called ______.",
        options: ["Sound pollution", "Land pollution", "Water Pollution", "Air pollution"],
        correctAnswer: "C",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Scientists are warning us that the rise in earth's temperature causes ______.",
        options: ["Deforestation", "Land sliding", "Pollution", "Global warming"],
        correctAnswer: "D",
        module: "Constitutional Values - Citizenship"
    },
    {
        question: "Shyam avoids the use of plastic and chemical fertilizers. He is practising a ______.",
        options: ["Green lifestyle", "Modern lifestyle", "Busy lifestyle", "Unhealthy lifestyle"],
        correctAnswer: "A",
        module: "Constitutional Values - Citizenship"
    }
];

const secondYearQuestions = [
    // Module: Basic Career Skills
    {
        question: "Which of the following are included in a resume?",
        options: [
            "Hobbies, favorite foods, and personal interests",
            "Childhood memories, dreams, and aspirations",
            "Daily routine, favorite movies, and vacation plans",
            "Contact information, educational details, skills and work experience"
        ],
        correctAnswer: "D",
        module: "Basic Career Skills"
    },
    {
        question: "Raghav is applying for a job at a marketing firm. What will make his cover letter easy to read?",
        options: [
            "Long descriptions",
            "Dividing the text into shorter paragraphs",
            "Increasing the font size",
            "All of these"
        ],
        correctAnswer: "B",
        module: "Basic Career Skills"
    },
    {
        question: "To apply for a job, what is the next step after making an impactful resume?",
        options: [
            "Sending the resume to the employer",
            "Writing an impressive cover letter",
            "Preparing for interview",
            "Applying for the job"
        ],
        correctAnswer: "B",
        module: "Basic Career Skills"
    },
    {
        question: "Pranav is working on his resume. While reviewing his resume, what should Pranav keep in mind?",
        options: [
            "Check for spelling and grammar mistakes",
            "Ensure that the information provided is correct",
            "Highlight skills and qualifications that match the job",
            "All of these"
        ],
        correctAnswer: "D",
        module: "Basic Career Skills"
    },
    {
        question: "Pooja is applying for a Motor Mechanics position in an automobile company. What should she include in her cover letter?",
        options: [
            "Salary expectations",
            "Education details",
            "Reasons why she is suitable for the role",
            "Her hobbies - cooking, gardening"
        ],
        correctAnswer: "C",
        module: "Basic Career Skills"
    },
    {
        question: "What is formal communication?",
        options: [
            "All written communication",
            "Official communication following a set of rules",
            "Talking with friends and family",
            "Casual chatting on social media"
        ],
        correctAnswer: "B",
        module: "Basic Career Skills"
    },
    {
        question: "Which of the following is a formal introduction in a job interview?",
        options: [
            "Hey there! I'm Parmeet, nice to meet you!",
            "Hi, I'm Parmeet. Thanks for having me!",
            "Yo, I'm Parmeet. Let's get started!",
            "Good morning/ afternoon. I am Parmeet and I want to thank you for considering me for this role."
        ],
        correctAnswer: "D",
        module: "Basic Career Skills"
    },
    {
        question: "What is an example of formal written communication?",
        options: [
            "Texting a friend",
            "Sending a WhatsApp message",
            "Writing an email to your manager",
            "Posting on social media platforms"
        ],
        correctAnswer: "C",
        module: "Basic Career Skills"
    },
    {
        question: "During a job interview, if you couldn't hear or understand a question, what would you say?",
        options: [
            "Sorry! I didn't understand. Could you please repeat the question?",
            "Hey, can you repeat that? I wasn't paying attention.",
            "I am lost. Can you say it again?",
            "Speak clearly and repeat the question."
        ],
        correctAnswer: "A",
        module: "Basic Career Skills"
    },
    {
        question: "During a job interview, Ramesh is asked to describe his top three strengths. Which of the following responses shows good formal communication?",
        options: [
            "I'm pretty good at a lot of things.",
            "Uh, I guess I can do a little bit of everything.",
            "My top three skills are problem-solving, teamwork, and attention to detail.",
            "I don't know, I never really thought about it."
        ],
        correctAnswer: "C",
        module: "Basic Career Skills"
    },
    // Module: Future Work Skills
    {
        question: "How have workplaces changed after COVID?",
        options: [
            "More focus on technology",
            "Flexible working hours",
            "Mix of in-person and at-home work",
            "All of the above"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    {
        question: "Which is an example of being open to learning in the workplace?",
        options: [
            "Refusing to attend training sessions to improve technology skills",
            "Accepting and adapting to changes in work processes",
            "Avoiding feedback from colleagues",
            "Ignoring advancements in technology"
        ],
        correctAnswer: "B",
        module: "Future Work Skills"
    },
    {
        question: "Irfan needs a job. How can he prepare for the future of work?",
        options: [
            "Learn making reels and TikTok videos",
            "Avoid learning new skills",
            "Master internet skills",
            "Avoid building professional relationships"
        ],
        correctAnswer: "C",
        module: "Future Work Skills"
    },
    {
        question: "What is an important future workplace skill for employees?",
        options: [
            "Doing paperwork",
            "Doing manual work",
            "Networking and relationship-building",
            "Planning holidays"
        ],
        correctAnswer: "C",
        module: "Future Work Skills"
    },
    {
        question: "Raghav joined a new company after COVID. He is nervous about using the digital tablets provided at work. What should he do?",
        options: [
            "Complain to his manager",
            "Ask his coworkers to do all the digital work",
            "Quit his job",
            "Keep an open mind and ask his coworkers to teach him"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    {
        question: "Which of the following best describes the gig economy?",
        options: [
            "A system where employees work full-time for a single employer",
            "A system where workers take on part-time or temporary jobs",
            "A system where workers are paid a fixed monthly salary",
            "A system where workers have fixed work hours and locations"
        ],
        correctAnswer: "B",
        module: "Future Work Skills"
    },
    {
        question: "Which option below describes a 'gig' in the gig economy?",
        options: [
            "A job with full-time hours and benefits",
            "A typical 9–5 job",
            "A specific task or project",
            "None of these"
        ],
        correctAnswer: "C",
        module: "Future Work Skills"
    },
    {
        question: "A____ helps gig workers find customers and provide services at a fixed charge.",
        options: [
            "Netflix",
            "platform/app",
            "school",
            "bank"
        ],
        correctAnswer: "B",
        module: "Future Work Skills"
    },
    {
        question: "Seema wants to become a gig worker. How can she find gig work opportunities?",
        options: [
            "Find a suitable Gig platform",
            "Connect with friends, people she might know and groups in her community",
            "Update her resume with her qualifications and skills",
            "All of these"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    {
        question: "Sultan is a skilled electrician. He is looking for platform based gig work that matches his skills. Which of the following platforms would be most suitable for Sultan to find job opportunities?",
        options: [
            "Amazon for selling products online",
            "Zoom for video calls",
            "Uber for driving people",
            "Urban Company for offering home repair services"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    // Add more questions to reach at least 25 for second year
    {
        question: "What does self-employment mean?",
        options: [
            "Working for a single employer",
            "Working independently and earning directly from your work",
            "Receiving a fixed monthly salary",
            "Working part-time from home"
        ],
        correctAnswer: "B",
        module: "Future Work Skills"
    },
    {
        question: "What is a benefit of self-employment?",
        options: [
            "Directly earning from your work",
            "Fixed working hours",
            "Monthly salary payment",
            "Limited control over your tasks"
        ],
        correctAnswer: "A",
        module: "Future Work Skills"
    },
    {
        question: "Which of the following is an example of self - employment?",
        options: [
            "Working full-time at a company",
            "Driving for a taxi company",
            "Being a student at a university",
            "Teaching subjects or skills as a personal tutor"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    {
        question: "How can you become self-employed?",
        options: [
            "Learn about the work, take small courses",
            "Try your idea on a small scale",
            "Use chats, local ads and ask friends spread the word",
            "All of these"
        ],
        correctAnswer: "D",
        module: "Future Work Skills"
    },
    {
        question: "Rohan loves photography and dreams of starting his own photography business. What should Rohan do to start his self-employment journey?",
        options: [
            "Buy the latest photography equipment, even if it is beyond his budget",
            "Take random pictures and share them online",
            "Learn more about photography and join a basic photography course",
            "Start advertising his services without any planning"
        ],
        correctAnswer: "C",
        module: "Future Work Skills"
    }
];

// DOM Elements
const homeBtn = document.getElementById('homeBtn');
const historyBtn = document.getElementById('historyBtn');
const startExamBtn = document.getElementById('startExamBtn');
const submitExamBtn = document.getElementById('submitExamBtn');
const newExamBtn = document.getElementById('newExamBtn');
const viewAnswersBtn = document.getElementById('viewAnswersBtn');
const backToResultsBtn = document.getElementById('backToResultsBtn');
const backToExamBtn = document.getElementById('backToExamBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const yearSelect = document.getElementById('yearSelect');

const examView = document.getElementById('examView');
const resultsView = document.getElementById('resultsView');
const answersView = document.getElementById('answersView');
const historyView = document.getElementById('historyView');

const instructions = document.getElementById('instructions');
const examContainer = document.getElementById('examContainer');
const questionContainer = document.getElementById('questionContainer');
const optionsContainer = document.getElementById('optionsContainer');
const questionCounter = document.getElementById('questionCounter');
const resultsDetails = document.getElementById('resultsDetails');
const answersContainer = document.getElementById('answersContainer');
const historyContainer = document.getElementById('historyContainer');

// App State
let currentExam = {
    questions: [],
    currentQuestionIndex: 0,
    answers: [],
    score: 0,
    date: null,
    year: 'both'
};

let examHistory = JSON.parse(localStorage.getItem('examHistory')) || [];

// Initialize the app
function init() {
    validateQuestionBanks();
    setupEventListeners();
    showView('examView');
    loadHistory();
}

// Validate question banks have enough questions
function validateQuestionBanks() {
    if (firstYearQuestions.length < 25) {
        console.warn(`First year question bank has only ${firstYearQuestions.length} questions (minimum 25 recommended)`);
    }
    if (secondYearQuestions.length < 25) {
        console.warn(`Second year question bank has only ${secondYearQuestions.length} questions (minimum 25 recommended)`);
    }
    if ((firstYearQuestions.length + secondYearQuestions.length) < 25) {
        console.warn(`Combined question bank has only ${firstYearQuestions.length + secondYearQuestions.length} questions (minimum 25 recommended for "Both Years" option)`);
    }
}

// Set up event listeners
function setupEventListeners() {
    homeBtn.addEventListener('click', () => {
        showView('examView');
        homeBtn.classList.add('active');
        historyBtn.classList.remove('active');
    });
    
    historyBtn.addEventListener('click', () => {
        showView('historyView');
        historyBtn.classList.add('active');
        homeBtn.classList.remove('active');
    });
    
    startExamBtn.addEventListener('click', startExam);
    submitExamBtn.addEventListener('click', submitExam);
    newExamBtn.addEventListener('click', resetExam);
    viewAnswersBtn.addEventListener('click', showAnswers);
    backToResultsBtn.addEventListener('click', () => showView('resultsView'));
    backToExamBtn.addEventListener('click', () => {
        showView('examView');
        homeBtn.classList.add('active');
        historyBtn.classList.remove('active');
    });
    
    prevBtn.addEventListener('click', showPreviousQuestion);
    nextBtn.addEventListener('click', showNextQuestion);
}

// Show a specific view
function showView(viewName) {
    // Hide all views
    document.querySelectorAll('.view').forEach(view => {
        view.style.display = 'none';
    });
    
    // Show the requested view
    document.getElementById(viewName).style.display = 'block';
}

// Start a new exam with exactly 25 questions
function startExam() {
    const selectedYear = yearSelect.value;
    
    // Select questions based on year
    let questions = [];
    if (selectedYear === 'first') {
        questions = [...firstYearQuestions];
    } else if (selectedYear === 'second') {
        questions = [...secondYearQuestions];
    } else {
        questions = [...firstYearQuestions, ...secondYearQuestions];
    }
    
    // Ensure we have enough questions
    if (questions.length < 25) {
        alert(`Not enough questions available (${questions.length}). Please add more questions to the question bank.`);
        return;
    }
    
    // Shuffle and select exactly 25 questions
    questions = shuffleArray(questions).slice(0, 25);
    
    // Initialize exam state
    currentExam = {
        questions: questions,
        currentQuestionIndex: 0,
        answers: Array(25).fill(null), // Fixed to 25 answers
        score: 0,
        date: new Date(),
        year: selectedYear
    };
    
    // Hide instructions, show exam
    instructions.style.display = 'none';
    examContainer.style.display = 'block';
    
    // Display first question
    displayQuestion();
}

// Shuffle array (Fisher-Yates algorithm)
function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

// Display current question
function displayQuestion() {
    const question = currentExam.questions[currentExam.currentQuestionIndex];
    
    // Update question counter - fixed to show 25 total questions
    questionCounter.textContent = `Question ${currentExam.currentQuestionIndex + 1} of 25`;
    
    // Display question
    questionContainer.textContent = question.question;
    
    // Display options
    optionsContainer.innerHTML = '';
    question.options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.className = 'option';
        if (currentExam.answers[currentExam.currentQuestionIndex] === String.fromCharCode(65 + index)) {
            optionElement.classList.add('selected');
        }
        optionElement.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
        optionElement.dataset.option = String.fromCharCode(65 + index);
        optionElement.addEventListener('click', selectOption);
        optionsContainer.appendChild(optionElement);
    });
    
    // Update navigation buttons
    prevBtn.disabled = currentExam.currentQuestionIndex === 0;
    nextBtn.disabled = currentExam.currentQuestionIndex === 24; // Fixed to 24 (0-24 for 25 questions)
}

// Select an option
function selectOption(e) {
    const selectedOption = e.target.dataset.option;
    
    // Remove selected class from all options
    document.querySelectorAll('.option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // Add selected class to clicked option
    e.target.classList.add('selected');
    
    // Save answer
    currentExam.answers[currentExam.currentQuestionIndex] = selectedOption;
}

// Show previous question
function showPreviousQuestion() {
    if (currentExam.currentQuestionIndex > 0) {
        currentExam.currentQuestionIndex--;
        displayQuestion();
    }
}

// Show next question
function showNextQuestion() {
    if (currentExam.currentQuestionIndex < 24) { // Fixed to 24 (0-24 for 25 questions)
        currentExam.currentQuestionIndex++;
        displayQuestion();
    }
}

// Submit exam and calculate results
function submitExam() {
    // Calculate score (2 marks per correct answer)
    currentExam.score = 0;
    currentExam.questions.forEach((question, index) => {
        if (currentExam.answers[index] === question.correctAnswer) {
            currentExam.score += 2;
        }
    });
    
    // Save to history
    currentExam.date = new Date();
    examHistory.push({...currentExam});
    localStorage.setItem('examHistory', JSON.stringify(examHistory));
    
    // Show results
    showResults();
}

// Show exam results
function showResults() {
    showView('resultsView');
    
    // Display results - fixed to show 25 questions
    resultsDetails.innerHTML = `
        <div class="result-item">
            <span class="result-label">Date:</span> ${currentExam.date.toLocaleString()}
        </div>
        <div class="result-item">
            <span class="result-label">Year:</span> ${currentExam.year === 'both' ? 'Both Years' : currentExam.year === 'first' ? 'First Year' : 'Second Year'}
        </div>
        <div class="result-item">
            <span class="result-label">Questions:</span> 25
        </div>
        <div class="result-item">
            <span class="result-label">Score:</span> ${currentExam.score}/50
        </div>
        <div class="result-item">
            <span class="result-label">Percentage:</span> ${((currentExam.score / 50) * 100).toFixed(2)}%
        </div>
    `;
}

// Show answers with correct/incorrect indicators
function showAnswers() {
    showView('answersView');
    
    answersContainer.innerHTML = '';
    
    currentExam.questions.forEach((question, index) => {
        const answerItem = document.createElement('div');
        answerItem.className = 'answer-item';
        
        const questionElement = document.createElement('div');
        questionElement.className = 'answer-question';
        questionElement.textContent = `${index + 1}. ${question.question}`;
        answerItem.appendChild(questionElement);
        
        question.options.forEach((option, optionIndex) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'answer-option';
            
            const optionLetter = String.fromCharCode(65 + optionIndex);
            
            if (optionLetter === question.correctAnswer) {
                optionElement.classList.add('correct');
            }
            
            if (currentExam.answers[index] === optionLetter) {
                optionElement.classList.add('selected');
            }
            
            optionElement.textContent = `${optionLetter}. ${option}`;
            answerItem.appendChild(optionElement);
        });
        
        const userAnswer = currentExam.answers[index] ? currentExam.answers[index] : 'Not answered';
        const resultElement = document.createElement('div');
        resultElement.textContent = `Your answer: ${userAnswer} ${userAnswer === question.correctAnswer ? '✓' : '✗'}`;
        resultElement.style.marginTop = '10px';
        resultElement.style.fontWeight = userAnswer === question.correctAnswer ? 'normal' : 'bold';
        resultElement.style.color = userAnswer === question.correctAnswer ? '#27ae60' : '#e74c3c';
        answerItem.appendChild(resultElement);
        
        answersContainer.appendChild(answerItem);
    });
}

// Reset exam to start screen
function resetExam() {
    instructions.style.display = 'block';
    examContainer.style.display = 'none';
    showView('examView');
}

// Load and display exam history
function loadHistory() {
    historyContainer.innerHTML = '';
    
    if (examHistory.length === 0) {
        historyContainer.innerHTML = '<p>No exam history yet.</p>';
        return;
    }
    
    // Sort by date (newest first)
    const sortedHistory = [...examHistory].sort((a, b) => new Date(b.date) - new Date(a.date));
    
    sortedHistory.forEach((exam, index) => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        
        const dateElement = document.createElement('div');
        dateElement.className = 'history-date';
        dateElement.textContent = new Date(exam.date).toLocaleString();
        historyItem.appendChild(dateElement);
        
        const yearElement = document.createElement('div');
        yearElement.textContent = `Year: ${exam.year === 'both' ? 'Both Years' : exam.year === 'first' ? 'First Year' : 'Second Year'}`;
        historyItem.appendChild(yearElement);
        
        const scoreElement = document.createElement('div');
        scoreElement.className = 'history-score';
        scoreElement.textContent = `Score: ${exam.score}/50 (${((exam.score / 50) * 100).toFixed(2)}%)`;
        historyItem.appendChild(scoreElement);
        
        historyItem.addEventListener('click', () => {
            currentExam = {...exam};
            showResults();
        });
        
        historyContainer.appendChild(historyItem);
    });
}

// Initialize the app
init();